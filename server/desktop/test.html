<!DOCTYPE html>
<html>
<head>
    <title>Desktop App Test</title>
    <style>
        body {
            background: #0E1116;
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            padding: 20px;
        }
        button {
            background: #3F7AF5;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 10px;
            border-radius: 8px;
            cursor: pointer;
        }
        #output {
            margin-top: 20px;
            padding: 20px;
            background: #1A1D22;
            border-radius: 8px;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>Desktop App Button Test</h1>
    <button id="testInvoke">Test Invoke</button>
    <button id="testDialog">Test Dialog</button>
    <button id="testPath">Test Path</button>
    <div id="output">Output will appear here...</div>

    <script type="module">
        const output = document.getElementById('output');
        
        function log(message) {
            output.textContent += message + '\n';
            console.log(message);
        }
        
        // Test if Tauri APIs are available
        log('Testing Tauri API availability...');
        
        // Check for window.__TAURI__
        if (window.__TAURI__) {
            log('✓ window.__TAURI__ is available');
            log('Available APIs: ' + Object.keys(window.__TAURI__).join(', '));
        } else {
            log('✗ window.__TAURI__ is NOT available');
        }
        
        // Try importing modules
        try {
            const { invoke } = await import('@tauri-apps/api/core');
            log('✓ Successfully imported invoke from @tauri-apps/api/core');
            
            document.getElementById('testInvoke').addEventListener('click', async () => {
                try {
                    const result = await invoke('get_local_ip');
                    log('Invoke result: ' + result);
                } catch (error) {
                    log('Invoke error: ' + error);
                }
            });
        } catch (error) {
            log('✗ Failed to import invoke: ' + error);
        }
        
        try {
            const { open } = await import('@tauri-apps/plugin-dialog');
            log('✓ Successfully imported open from @tauri-apps/plugin-dialog');
            
            document.getElementById('testDialog').addEventListener('click', async () => {
                try {
                    const result = await open({
                        directory: true,
                        multiple: false
                    });
                    log('Dialog result: ' + result);
                } catch (error) {
                    log('Dialog error: ' + error);
                }
            });
        } catch (error) {
            log('✗ Failed to import dialog: ' + error);
        }
        
        try {
            const { appDataDir } = await import('@tauri-apps/api/path');
            log('✓ Successfully imported appDataDir from @tauri-apps/api/path');
            
            document.getElementById('testPath').addEventListener('click', async () => {
                try {
                    const result = await appDataDir();
                    log('App data dir: ' + result);
                } catch (error) {
                    log('Path error: ' + error);
                }
            });
        } catch (error) {
            log('✗ Failed to import path: ' + error);
        }
    </script>
</body>
</html>